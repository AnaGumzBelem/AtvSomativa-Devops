name: Alerta no Discord

on:
  pull_request:
    branches:
      - main

jobs:
  send_alert:
    runs-on: ubuntu-latest
    steps:
      - name: Checar código
        uses: actions/checkout@v4

      # Passo de Debug para imprimir os valores
      - name: Debug - Imprimir valores
        run: |
          echo "Webhook URL: ${{ secrets.DISCORD_WEBHOOK }}"
          echo "Título do PR: ${{ github.event.pull_request.title || 'Título do PR não encontrado' }}"
          echo "Mensagem Args: ${{ github.event.pull_request.body || 'Mensagem do PR não encontrada' }}"

      - name: Enviar alerta para o Discord
        uses: johnnyhuy/actions-discord-git-webhook@main
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          args: ${{ github.event.pull_request.title || 'Novo Pull Request na branch main' }}
